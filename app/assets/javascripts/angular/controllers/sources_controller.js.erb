app.controller('SourcesController', ['$scope', '$routeParams', '$modal', 'Source', 'SourcesQuery', 'RecommendationGroup',
    function ($scope, $routeParams, $modal, Source, SourcesQuery, RecommendationGroup) {
        if (!!$routeParams.sourceId) {
            Source.get({sourceId: $routeParams.sourceId},
                function (data, status, headers, config) {
                    $modalInstance = $modal.open({
                        templateUrl: "<%= asset_path('source.html') %>",
                        controller: "SourceController",
                        resolve: {
                            source: function () {
                                return data;
                            }
                        }
                    });
                }
                , error = function (data, status, headers, config) {
                    //TODO: add error alert
                });
        } else if (!!$routeParams.groupId) {
            RecommendationGroup.get({groupId: $routeParams.groupId},
                function (data, status, headers, config) {
                    $modalInstance = $modal.open({
                        templateUrl: "<%= asset_path('recommendation_group.html') %>",
                        controller: "RecommendationGroupController",
                        resolve: {
                            group: function () {
                                return data;
                            }
                        }
                    });
                }
                , error = function (data, status, headers, config) {
                    //TODO: add error alert
                });
        }

        $scope.SourcesQuery = SourcesQuery;
        // Fill out the following when the User service is done
//        $scope.updateNoShow = function (source) {
//
//        };
//        $scope.updateTried = function (source) {
//
//        };
    }]);
